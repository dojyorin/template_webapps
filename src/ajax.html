<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

        <script src="https://cdn.jsdelivr.net/npm/axios@latest/dist/axios.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/qs@latest/dist/qs.min.js"></script>

        <title>Ajax</title>
    </head>

    <body>
        Ajax
    </body>

    <script>
        axios.defaults.paramsSerializer = v => Qs.stringify(v);
        axios.defaults.transformRequest = v => Qs.stringify(v);

        async function httpMiniFetch(path, type){
            const options = {
                method: "GET",
                mode: "cors",
                cache: "no-cache",
                credential: "omit",
                referrerPolicy: "no-referrer",
                redirect: "follow",
                keepalive: false,
                referrer: "",
                integrity: "",
                headers: {},
                body: null
            };

            return (await fetch(path, options))[type]();
        }

        function httpMiniXhr(path, type){
            const xhr = new XMLHttpRequest();

            xhr.responseType = type;
            xhr.withCredentials = false;

            xhr.open("GET", path, true, null, null);

            return new Promise((resolve, reject)=>{
                xhr.addEventListener("load", () => resolve(xhr.response));
                xhr.addEventListener("error", () => reject());

                xhr.send(null);
            });
        }

        (async()=>{
            const {data: response1} = await axios.get("https://ntp-a1.nict.go.jp/cgi-bin/json");
            console.log(response1);

            const response2 = await httpMiniFetch("https://ntp-a1.nict.go.jp/cgi-bin/json", "json");
            console.log(response2);

            const response3 = await httpMiniXhr("https://ntp-a1.nict.go.jp/cgi-bin/json", "json");
            console.log(response3);
        })();
    </script>
</html>