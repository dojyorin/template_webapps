<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@latest/dist/vuetify.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Kosugi|M+PLUS+1p&amp;subset=japanese">

        <script src="https://cdn.jsdelivr.net/npm/vue@latest/dist/vue.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue-router@latest/dist/vue-router.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vuex@latest/dist/vuex.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vuetify@latest/dist/vuetify.min.js"></script>

        <title>Application</title>
    </head>

    <body>
        <div id="vue">
            <v-app>
                <v-app-bar app dark :height="height" :color="color">
                    <v-app-bar-nav-icon @click="drawer = true"></v-app-bar-nav-icon>
                    <v-toolbar-title>Title</v-toolbar-title>

                    <v-spacer></v-spacer>
                    <vue-header></vue-header>
                </v-app-bar>

                <v-navigation-drawer app temporary v-model="drawer">
                    <v-toolbar dark absolute width="100%" :height="height" :color="color">
                        <v-toolbar-title>Menu</v-toolbar-title>
                        <v-spacer></v-spacer>

                        <v-btn icon @click="drawer = false">
                            <v-icon large>mdi-close</v-icon>
                        </v-btn>
                    </v-toolbar>

                    <vue-drawer :style="`padding-top:${height}px!important;`"></vue-drawer>
                </v-navigation-drawer>

                <v-main>
                    <router-view></router-view>
                </v-main>

                <v-footer>
                    <vue-footer></vue-footer>
                </v-footer>
            </v-app>
        </div>
    </body>

    <template id="components_layouts_header">
        <vue-menu system color="purple" title="Notify" icon="mdi-bell-outline" :count="1"></vue-menu>
    </template>

    <template id="components_layouts_drawer">
        <v-list>
            <template v-for="(page, i) in pages">
                <v-list-item :key="i" :to="page.to">
                    <v-list-item-icon class="mr-4">
                        <v-icon>{{page.icon}}</v-icon>
                    </v-list-item-icon>

                    <v-list-item-content>
                        <v-list-item-title>{{page.title}}</v-list-item-title>
                    </v-list-item-content>
                </v-list-item>
            </template>
        </v-list>
    </template>

    <template id="components_layouts_footer">
    </template>

    <template id="components_windows_notify">
        <v-snackbar app dark top :timeout="5000" :color="color" :value="value">
            <span>
                <slot></slot>
            </span>

            <template #action="{attrs}">
                <v-btn icon v-bind="attrs" @click="$emit('input')">
                    <v-icon>mdi-close</v-icon>
                </v-btn>
            </template>
        </v-snackbar>
    </template>

    <template id="components_windows_dialog">
        <v-dialog persistent scrollable :fullscreen="full" :value="value">
            <v-card :tile="full">
                <v-system-bar window dark :color="color">
                    <v-icon>{{icon}}</v-icon>
                    <span>{{title}}</span>

                    <v-spacer></v-spacer>

                    <v-btn icon tile @click="full = !full">
                        <v-icon v-if="full" class="mr-0">mdi-window-restore</v-icon>
                        <v-icon v-else class="mr-0">mdi-window-maximize</v-icon>
                    </v-btn>

                    <v-btn icon tile @click="$emit('input')">
                        <v-icon class="mr-0">mdi-window-close</v-icon>
                    </v-btn>
                </v-system-bar>

                <v-card-text class="pa-0">
                    <slot></slot>
                </v-card-text>
            </v-card>
        </v-dialog>
    </template>

    <template id="components_windows_menu">
        <v-menu offset-y min-width="300" :close-on-content-click="false">
            <template #activator="{on, attrs}">
                <v-badge overlap bottom color="grey" offset-y="48" offset-x="8" :content="count" :value="!!count">
                    <v-btn icon v-bind="attrs" v-on="on">
                        <v-icon large>{{icon}}</v-icon>
                    </v-btn>
                </v-badge>
            </template>

            <v-card>
                <v-system-bar v-if="system" window dark :color="color">
                    <v-icon>{{icon}}</v-icon>
                    <span>{{title}}</span>
                </v-system-bar>

                <v-card-text class="pa-0">
                    <slot></slot>
                </v-card-text>
            </v-card>
        </v-menu>
    </template>

    <template id="pages_index">
        <div>
            <v-btn @click="notify = true">Notify</v-btn>
            <vue-notify color="purple" v-model="notify"></vue-notify>
        </div>
    </template>

    <template id="pages_sub">
        <div>
            <v-btn @click="dialog = true">Dialog</v-btn>
            <vue-dialog color="purple" title="Dialog" icon="mdi-information-outline" v-model="dialog"></vue-dialog>
        </div>
    </template>

    <script>
        const vue = (()=>{
            const components_windows_notify = {
                template: "#components_windows_notify",
                props: {
                    value: Boolean,
                    color: String
                }
            };

            const components_windows_dialog = {
                template: "#components_windows_dialog",
                props: {
                    value: Boolean,
                    title: String,
                    color: String,
                    icon: String
                },
                data(){
                    return {
                        full: false
                    };
                }
            };

            const components_windows_menu = {
                template: "#components_windows_menu",
                props: {
                    value: Boolean,
                    title: String,
                    color: String,
                    icon: String,
                    count: Number,
                    system: Boolean
                }
            };

            const components_layouts_header = {
                template: "#components_layouts_header",
                components: {
                    "vue-menu": components_windows_menu
                }
            };

            const components_layouts_drawer = {
                template: "#components_layouts_drawer",
                data(){
                    return {
                        pages: [{
                            title: "Main",
                            to: "/",
                            icon: "mdi-home"
                        }, {
                            title: "Sub",
                            to: "/sub",
                            icon: "mdi-web"
                        }]
                    };
                }
            };

            const components_layouts_footer = {
                template: "#components_layouts_footer"
            };

            const pages_index = {
                template: "#pages_index",

                components: {
                    "vue-notify": components_windows_notify
                },

                data(){
                    return {
                        notify: false
                    };
                }
            };

            const pages_sub = {
                template: "#pages_sub",

                components: {
                    "vue-dialog": components_windows_dialog
                },

                data(){
                    return {
                        dialog: false
                    };
                }
            };

            const router_index = {
                routes: [{
                    path: "/",
                    component: pages_index
                }, {
                    path: "/sub",
                    component: pages_sub
                }]
            };

            const store_index = {
                namespaced: true,

                state(){
                    return {};
                },
                getters: {},
                mutations: {},
                actions: {}
            };

            return new Vue({
                el: "#vue",

                vuetify: new Vuetify(),
                router: new VueRouter(router_index),
                store: new Vuex.Store(store_index),

                components: {
                    "vue-header": components_layouts_header,
                    "vue-drawer": components_layouts_drawer,
                    "vue-footer": components_layouts_footer
                },

                data(){
                    return {
                        height: 52,
                        color: "blue",
                        drawer: false
                    };
                }
            });
        })();
    </script>

    <style>
        ::-webkit-scrollbar{
            display: none !important;
        }
        .v-application{
            font-family: "M PLUS 1p", "Kosugi" !important;
        }
        .v-btn{
            text-transform: unset !important;
        }
        .v-toolbar__content :not(.v-app-bar__nav-icon) .v-btn:last-of-type{
            margin-right: -12px !important;
        }
        .override_window_action{
            margin: 0 !important;
        }
    </style>
</html>