<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, height=device-height, minimum-scale=1, maximum-scale=1, initial-scale=1, user-scalable=no">
        <meta name="referrer" content="no-referrer">

        <title></title>
    </head>

    <body></body>

    <script async type="module">
        Object.defineProperty(globalThis, "$fetch", {
            enumerable: false,
            configurable: false,
            writable: false,
            async value(path, option){
                const {origin, pathname} = /^https*:\/\//i.test(path) ? new URL(path) : new URL(path, location.href);
                const query = new URLSearchParams(Object.entries(option?.query ?? {})).toString();

                const response = await fetch(`${origin}${pathname === "/" ? "": pathname}${query === "" ? "" : `?${query}`}`.toLowerCase(), {
                    method: option?.method ?? "get",
                    credentials: option?.credentials ?? "omit",
                    mode: option?.mode ?? "cors",
                    cache: option?.cache ?? "no-cache",
                    referrerPolicy: option?.referrerPolicy ?? "no-referrer",
                    referrer: option?.referrer ?? "",
                    redirect: option?.redirect ?? "follow",
                    keepalive: option?.keepalive ?? false,
                    integrity: "",
                    signal: null,
                    window: null,
                    headers: option?.headers ?? {},
                    body: option?.body ?? null
                });

                return option?.type === "raw" ? response : response[option?.type ?? "json"]();
            }
        });

        const result = await $fetch("http://worldclockapi.com/api/json/utc/now");
        console.log(result);
    </script>
</html>