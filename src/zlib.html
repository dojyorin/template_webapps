<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, height=device-height, minimum-scale=1, maximum-scale=1, initial-scale=1, user-scalable=no">
        <meta name="referrer" content="no-referrer">

        <script src="https://cdn.jsdelivr.net/npm/pako@latest/dist/pako.min.js"></script>

        <title></title>
    </head>

    <body></body>

    <script async type="module">
        Object.defineProperty(globalThis, "$zlib", {
            enumerable: false,
            configurable: false,
            writable: false,
            async value(data, encode, gzip){
                return new Response(new Blob([data]).stream().pipeThrough(new (encode ? CompressionStream : DecompressionStream)(gzip ? "gzip" : "deflate"))).arrayBuffer();
            }
        });

        const sample = new Uint8Array(new Float32Array(16 / 4 * 0x100000).map(() => Math.random()).buffer);

        const enc = await $zlib(sample, true, true);
        const dec = pako.inflate(enc);

        console.log("---------- Raw Data ----------");
        console.log(sample);

        console.log("---------- Decoded Data ----------");
        console.log(dec);

        console.log("---------- Encoded Data ----------");
        console.log(new Uint8Array(enc));
    </script>
</html>