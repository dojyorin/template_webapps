<!doctype html>
<meta charset="utf-8">

<script async type="module">
    /**
     * @param {number} n
     * @return {string}
     */
    function displaytime(n) {
        return [n / 3600, n % 3600 / 60, n % 60].map((v) => Math.floor(v).toString().padStart(2, "0")).join(":");
    }

    /**
     * @param {ConstructorParameters<typeof Date>[0]} [source]
     * @return {number}
     */
    function unixtime(source) {
        return Math.floor((source === undefined ? Date.now() : typeof source === "string" ? Date.parse(source) : typeof source === "number" ? source : source.getTime()) / 1000);
    }

    /**
     * @param {ConstructorParameters<typeof Date>[0]} [source]
     * @param {"datetime" | "date" | "time" | "datetime-numeric" | "date-numeric" | "time-numeric"} [type]
     * @return {string}
     */
    function formatdate(source, type) {
        const date = source === undefined ? new Date() : typeof source === "string" ? new Date(source) : typeof source === "number" ? new Date(source * 1000) : source;

        switch (type) {
            case "datetime": return date.toLocaleString("sv-se");
            case "date": return date.toLocaleDateString("sv-se");
            case "time": return date.toLocaleTimeString("sv-se");
            case "datetime-numeric": return date.toLocaleString("sv-se").replace(/\D/g, "");
            case "date-numeric": return date.toLocaleDateString("sv-se").replace(/\D/g, "");
            case "time-numeric": return date.toLocaleTimeString("sv-se").replace(/\D/g, "");
            default: return date.toLocaleString("sv-se");
        }
    }

    /**
     * @param {ConstructorParameters<typeof Date>[0]} [source]
     * @param {string} [timezone]
     * @return {string}
     */
    function iso8601(source, timezone) {
        const date = source === undefined ? new Date() : typeof source === "string" ? new Date(source) : typeof source === "number" ? new Date(source * 1000) : source;

        return date.toLocaleString("sv-se", {
            timeZoneName: "longOffset",
            timeZone: timezone
        }).replace(" ", "T").replace(" GMT", "Z").replace("Z+", "+").replace("Z-", "-");
    }

    /**
     * @param {string} text
     * @return {boolean}
     */
    function iso8601test(text) {
        return /^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:Z|(?:\+|-)\d{2}:\d{2}){0,1}){0,1}$/.test(text);
    }

    console.log(displaytime(12345));
    console.log(unixtime());
    console.log(formatdate());
    console.log(iso8601());
    console.log(iso8601test("2000-01-01T00:00:00+09:00"));
</script>